<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Basic Sharp2d Structure</title>
    <script src="../../src/sharp2d/Core/BaseObject.js"></script>
    <script src="../../src/sharp2d/Core/BaseRenderer.js"></script>
    <script src="../../src/sharp2d/Renderers/CanvasRenderer.js"></script>
    <script src="../../src/sharp2d/Core/Component.js"></script>
    <script src="../../src/sharp2d/Components/Behavior.js"></script>
    <script src="../../src/sharp2d/Components/Mouse.js"></script>
    <script src="../../src/sharp2d/Components/Keyboard.js"></script>
    <script src="../../src/sharp2d/Components/Transform.js"></script>
    <script src="../../src/sharp2d/Components/FollowMouse.js"></script>
    <script src="../../src/sharp2d/Components/Gravity.js"></script>
    <script src="../../src/sharp2d/Components/Spin.js"></script>
    <script src="../../src/sharp2d/Core/Entity.js"></script>
    <script src="../../src/sharp2d/Core/ImageSource.js"></script>
    <script src="../../src/sharp2d/Entities/Sprite.js"></script>
    <script src="../../src/sharp2d/Game.js"></script>
</head>
<body onload="init()">
    <canvas width="800" height="600" style="border: 1px solid red"></canvas>
    <script>
    function init() {
        //Game.debug = true;
        var canvas = document.querySelector("canvas");
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        game = new Game(canvas); // game is GLOBAL.
        class Ball extends Sprite {
            constructor(name) {
                super(name, "images/Bia.png");
            }
        }
        var ball = new Ball();
        ball.addComponent(new FollowMouse());
        ball.addComponent(new Spin("spin"));
        ball.addComponent(new Behavior()).update = function() {
            //ball.getComponent("spin").angle = ball.transform.y / 10;
            if (game.mouse.leftDown) 
            {
                var newBall = new Ball();
                newBall.transform.x = ball.transform.x;
                newBall.transform.y = ball.transform.y;
//                newBall.transform.scale(0.25, 0.25);
                newBall.addComponent(new Spin());
                game.world.addEntity(newBall);
                console.log(game.world._entities.length, 
                    Math.round(1000 / game.deltaTime));
            }
        };
        game.world.addEntity(ball);
        game.start();
    }
    </script>
</body>
</html>
